function LincButtonBoxTestdirs=zeros(1,16);dirs(5:7)=1;ActiveWire(1,'OpenDevice');ActiveWire(1,'SetDirection',dirs);ActiveWire(1,'SetPort',dirs);RedButton=2;YellowButton=3;GreenButton=4;disp('All lights should be on \n');while(KbCheck); end; % wait until all keys are released.a=ActiveWire(1,'GetPort');  % wait until all buttons released;while(a(2)|a(3)|a(4))       a=ActiveWire(1,'GetPort'); end;fprintf('Press any button\n\nPress any key to stop test\n\n')tstart=getsecs;while(1);    a=ActiveWire(1,'GetPort');    if(a(RedButton))        tpress=getsecs;        fprintf(['Red button pressed after ' num2str(tpress-tstart) ' seconds!\n'])        while(a(RedButton))            a=ActiveWire(1,'GetPort');        end        fprintf(['... and held down for ' num2str(getsecs - tpress) ' seconds!\nan'])           fprintf('Press any button\n\nPress any key to stop test\n\n')        tstart=getsecs;            elseif(a(YellowButton))        tpress=getsecs;        fprintf(['Yellow button pressed after ' num2str(tpress-tstart) ' seconds!\n'])        while(a(YellowButton))            a=ActiveWire(1,'GetPort');        end        fprintf(['... and held down for ' num2str(getsecs - tpress) ' seconds!\nan'])           fprintf('Press any button\n\nPress any key to stop test\n\n')        tstart=getsecs;            elseif(a(GreenButton))        tpress=getsecs;        fprintf(['Green button pressed after ' num2str(tpress-tstart) ' seconds!\n'])        while(a(GreenButton))            a=ActiveWire(1,'GetPort');        end        fprintf(['... and held down for ' num2str(getsecs - tpress) ' seconds!\nan'])           fprintf('Press any button\n\nPress any key to stop test\n\n')        tstart=getsecs;    end    if(KBCheck)         disp('Finished!');        break;    endendactivewire('CloseAll')