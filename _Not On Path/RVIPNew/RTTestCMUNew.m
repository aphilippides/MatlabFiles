function[ins,out] = RTTestCMU(window,NumList)%window = SCREEN(0,'OpenWindow',WhiteIndex(0));white=WhiteIndex(window);black=BlackIndex(window);% Report the number and wait for responseStrNum=int2str(NumList');ins=zeros(size(NumList));SCREEN(window,'TextFont','Times New Roman');%for i=1:1000secs=0;count=1;getsecs;NotStillPressed=1;out=[];tstart=getsecs;tend=tstart+0.75;SCREEN('Screens');		% Make sure all Rushed functions are in memory.port=psychserial('open', '.Bin', '.Bout', 19200);%a0=psychserial('read', port,0.020);SCREEN(window,'DrawText','Press button box to start the test',400,50,black);a= psychserial('read', port, 0.001);while(isempty(a))a= psychserial('read', port, 0.001);endSCREEN(window,'DrawText','Press button box to start the test',400,50,white);% set font size for numbersSCREEN(window,'TextSize',72);% set position of textr=SCREEN(window,'Rect');XPos=0.5*(r(3)-r(1));YPos=0.5*(r(4)-r(2));loop={    'SCREEN(window,''DrawText'',StrNum(1,:),XPos,YPos,black);'    'tstart=getsecs;'    'tend=tstart+0.75;'    'ins(1)=tstart;'    'while (getsecs<=tend);'    '   a= psychserial(''read'', port, 0.0001);'    '       if(~isempty(a));'    '               if(uint8(a)==4); '    '   	            out(count)=getsecs;'    '                   count=count+1;'    '               end;'    '        end;'    'end;'    'for i=2:length(NumList);'    '   SCREEN(window,''DrawText'',StrNum(i-1,:),XPos,YPos,white);'    '    SCREEN(window,''DrawText'',StrNum(i,:),XPos,YPos,black);'    '	tstart=getsecs;'    '    tend=tend+0.75;'    '    ins(i)=tstart;'    '    while (getsecs<=tend);'    '       a= psychserial(''read'', port, 0.0001);'    '       if(~isempty(a));'    '               if(uint8(a)==4); '    '   	            out(count)=getsecs;'    '                   count=count+1;'    '               end;'    '        end;'    '    end;'    'end;'    'SCREEN(window,''DrawText'',StrNum(i,:),XPos,YPos,white);'    'tend=tend+0.25;'    'while (getsecs<=tend);'    '   a= psychserial(''read'', port, 0.0001);'    '       if(~isempty(a));'    '               if(uint8(a)==4); '    '   	            out(count)=getsecs;'    '                   count=count+1;'    '               end;'    '        end;'    'end;'};RUSH(loop,0.5);psychserial('close', port);testend=getsecs;ins-ins(1)out-ins(1)